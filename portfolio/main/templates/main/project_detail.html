{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>{{ project.title }}</title>
  <link rel="stylesheet" href="{% static 'main/css/style.css' %}" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
</head>
<body class="pj-body">
  <header class="pj-header">
    <a href="/" class="pj-logo">Lawrence Marete</a>
    <nav class="pj-nav">
      <a href="{% url 'home' %}">Home</a>
      <a href="{% url 'about' %}">About</a>
      <a href="{% url 'contact' %}">Contact</a>
    </nav>
  </header>

  <main class="pj-container">
    <section class="pj-hero">
      <div class="hero-left">
        <div class="hero-image-wrap">
          {% if project.image %}
            <img src="{{ project.image.url }}" alt="{{ project.title }} screenshot" class="hero-image" />
          {% else %}
            {% if project.slug == 'courier-management-system' %}
              <img src="{% static 'main/image/courier-mgmt-sys.png' %}" alt="{{ project.title }} screenshot" class="hero-image" />
            {% elif project.slug == 'garage-management-system' %}
              <img src="{% static 'main/image/garage-sys.png' %}" alt="{{ project.title }} screenshot" class="hero-image" />
            {% else %}
              <img src="{% static 'main/image/default.png' %}" alt="Default Image" class="hero-image" />
            {% endif %}
          {% endif %}

          <div class="hero-badges">
            {% if project.live_demo %}
              <a href="{{ project.live_demo }}" target="_blank" class="badge live">Live</a>
            {% endif %}
            {% if project.github %}
              <a href="{{ project.github }}" target="_blank" class="badge code">Source</a>
            {% endif %}
          </div>
        </div>
        <div class="meta-row">
          <span class="meta-item">Slug: {{ project.slug }}</span>
          <span class="meta-item">Updated: {{ project.updated_at|date:"F j, Y" }}</span>
        </div>
      </div>

      <aside class="hero-right">
        <h1 class="pj-title">{{ project.title }}</h1>
        <p class="pj-excerpt">{{ project.description }}</p>

        <div class="tech-section">
          <h4 class="section-title">Technologies</h4>
          <ul class="tech-list">
            {% for tech in project.tech.all %}
              <li class="tech-pill">
                {% if tech.icon %}
                  <img src="{{ tech.icon.url }}" alt="{{ tech.name }}" class="tech-icon" />
                {% endif %}
                <span>{{ tech.name }}</span>
              </li>
            {% empty %}
              <li class="tech-empty">No technologies listed.</li>
            {% endfor %}
          </ul>
        </div>

        <div class="actions">
          {% if project.github %}
            <a href="{{ project.github }}" class="btn primary" target="_blank">View on GitHub</a>
          {% endif %}
          {% if project.live_demo %}
            <a href="{{ project.live_demo }}" class="btn outline" target="_blank">Open Live Demo</a>
          {% endif %}
          <a href="{% url 'projects_list' %}" class="btn ghost">← Back to Projects</a>
        </div>
      </aside>
    </section>

    {% if project.images.all %}
      <section class="gallery-section">
        <h3 class="section-title">Screenshots</h3>
        <div class="gallery-grid">
          {% for img in project.images.all %}
            <figure class="gallery-card">
              <img src="{{ img.image.url }}" alt="{{ img.caption|default:project.title }}" class="gallery-img" />
              {% if img.caption %}
                <figcaption class="caption">{{ img.caption }}</figcaption>
              {% endif %}
            </figure>
          {% endfor %}
        </div>
      </section>
    {% endif %}
  </main>

  <footer class="pj-footer">
    <small>© {{ now.year }} Marete — Projects</small>
  </footer>
</body>
</html>
